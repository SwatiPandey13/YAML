this is reusable template

parameters:
- name: BuildAgentImage
  type: string
  default: 'RHEL8_Servers'

- name: buildTool
  type: string
  default: 'maven'

- name: mavenGoals
  type: string
  default: 'clean package'

- name: buildArgs
  type: string
  default: '-DskipTests=true'

- name: image
  type: string
  default: 'podman'

- name: mavenPomFile
  type: string
  default: 'pom.xml'

- name: snykDebugEnabled
  type: boolean
  default: false

- name: platform
  type: string
  default: 'linux'

- name: contents
  type: string
  default: '**/*.war'


jobs:
- job: Build
  variables:
    - group: ArtifactorySettings
    - name: BuildAgentImage
      value: 'RHEL8_Servers'
    - name: JAVA_HOME
      value: /opt/app/jvm/jdk-17
    - name: MAVEN_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
    - name: M2_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
- template: build.yml
  parameters:
    buildTool: 'maven'
    mavenGoals: 'clean package'
    buildArgs: '-DskipTests=true'
    image: 'podman'
    contents: '**/*.war'



- job: InitilizeAnalysis
  variables:
    - group: ArtifactorySettings
    - name: BuildAgentImage
      value: 'RHEL8_Servers'
    - name: JAVA_HOME
      value: /opt/app/jvm/jdk-17
    - name: MAVEN_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
    - name: M2_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
  dependsOn: Build
  steps:
  - script: echo "Preparaing SonarQube analysis environment"
    displayName: 'Analysis Initialization'
- template: sonar-analysis-template.yml
  parameters:
    buildTool: 'maven'
    mavenPomFile: 'pom.xml'
    sonarProjectKey: $(SONAR_PROJECT_KEY)
    sonarHostUrl: $(SONARQUBE_URL)
    sonarToken: $(SONARQUBE_TOKEN)


- job: SnyScan
  variables:
    - group: ArtifactorySettings
    - name: BuildAgentImage
      value: 'RHEL8_Servers'
    - name: JAVA_HOME
      value: /opt/app/jvm/jdk-17
    - name: MAVEN_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
    - name: M2_HOME
      value: /opt/citools/jenkins_unit/37d0742a/tools/hudson.tasks.Maven_MavenInstallation/MAVEN-3.8.8
- template: snyk-code-scan-template.yml
  parameters:
    snykDebugEnabled: false
    branchName: $(Build.SourceBranchName)
    repoName: $(Build.Repository.Name)
    buildTool: 'python'
    platform: 'linux'


=======================================

This azure-pipelines.yml

trigger: none
pool:
  name: RHEL8_Servers

resources:
  repositories:
    - repository: shared
      type: git
      name: Workflowlib_Global_Template/DevOps_Global_Template
      ref: workflowlib
      
stages:
- stage: BuildApplication
  jobs:
  - template: main.yml@shared
    parameters:
      buildTool: 'maven'
      mavenGoals: 'clean package'
      buildArgs: '-DskipTests=true'
      image: 'podman'
      contents: '**/*.war'
